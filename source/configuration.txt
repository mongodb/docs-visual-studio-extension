.. _visual-studio-extension-configuration:

==============================
Configure the {+product+}
==============================

.. default-domain:: mongodb

.. toctree::
   :titlesonly:
   :maxdepth: 2

Overview
--------

Learn how to configure the {+product+} in your .NET project and what
configuration options are available.

Configuration
-------------

To configure the {+product+}, perform the following actions:

#. Install the {+product+} as described in the :doc:`Install </install>` guide.

#. Create a file specifying your configuration for the {+product+} named
   ``{+product-settings-file-constant+}``.
   
   .. important:: Naming

      You can put your settings file in any directory, but you must name your
      file ``{+product-settings-file-constant+}``.

#. Add your configuration to your ``{product-settings-file-constant}`` file.

   The following sample configuration makes the {+product+} output your {+driver-long+}
   version in logs:

   .. code-block:: json

      { "OutputDriverVersion": false }

#. Add the following to the ``.csproj`` for your .NET application within the ``Project`` tag:

   .. code-block:: xml

      <ItemGroup>
        <AdditionalFiles Include="<Path to your {+product-settings-file-constant+} file>" />
      </ItemGroup>

To learn more about .NET project files, see 
`Understanding the Project File <https://docs.microsoft.com/en-us/aspnet/web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file>`__
from Microsoft.

To learn more about the ``AdditionalFiles`` tag, see 
:github:`Using Additonal Files </dotnet/roslyn/blob/main/docs/analyzers/Using%20Additional%20Files.md>`
in the Roslyn documentation.

Options
-------

The following is a description of all configuration settings supported
by the {+product+}:

.. list-table::
   :header-rows: 1
   :widths: 35 65

   * - Name
     - Description

   * - | **DefaultLinqVersion**
     - | **Type:** string
       |
       | **Description:**
       | The LINQ provider the {+product+} uses.
         
       .. tip::

          To learn more about LINQ, see the
          `Analyze Your Code <TODO: LINK TO GUIDE ONCE IT IS MERGED>`__
          page.

       | **Default**: ``"V2"``
       | **Accepted Values**: ``"V2"`` or ``"V3"``

   * - | **OutputDriverVersion**
     - | **Type:** boolean
       |
       | **Description:**
       | Specifies if the {+product+} sends your {+driver-short+} version in
         diagnostic messages sent to MongoDB. 
       |
       | **Default**: ``true``
       | **Accepted Values**: ``true`` or ``false``

   * - | **OutputInternalExceptions**
     - | **Type:** boolean
       |
       | **Description:**
       | Specifies if the {+product+} outputs your {+driver-short+} version in
         logs. 
       |
       | **Default**: ``true``
       | **Accepted Values**: ``true`` or ``false``


To learn more about the configuration options the {+product+} supports,
see the :github:`{+product+} source code </master/src/MongoDB.Analyzer/Core/Settings/SettingsHelper.cs>`.

Telemetry
~~~~~~~~~

When the {+product+} analyzes your source code, the tool
sends the following information to MongoDB:

- Your .NET version installed in Visual Studio
- Your operating system
- TODO: Make sure this list is exhaustive

To disable this feature, TODO: Include how to disable.
